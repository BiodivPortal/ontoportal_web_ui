<%=javascript_include_tag "//cdnjs.cloudflare.com/ajax/libs/d3/3.4.4/d3.min.js"%>
<%=javascript_include_tag "d3pie.min"%>
<%=javascript_include_tag "d3.layout.cloud"%>

<h1>Landscape</h1>

<div id="pieChart"></div>

<script>
  // Creating a pie chart using d3pie.js
  var pie = new d3pie("pieChart", {
    "header": {
      "title": {
        "text": "Lots of Programming Languages",
        "fontSize": 24,
        "font": "open sans"
      },
      "subtitle": {
        "text": "A full pie chart to show off label collision detection and resolution.",
        "color": "#999999",
        "fontSize": 12,
        "font": "open sans"
      },
      "titleSubtitlePadding": 9
    },
    "footer": {
      "color": "#999999",
      "fontSize": 10,
      "font": "open sans",
      "location": "bottom-left"
    },
    "size": {
      "canvasWidth": 590,
      "pieOuterRadius": "90%"
    },
    "data": {
      "sortOrder": "value-desc",
      "content": [
        {
          "label": "JavaScript",
          "value": 264131,
          "color": "#2484c1"
        },
        {
          "label": "Ruby",
          "value": 218812,
          "color": "#0c6197"
        },
        {
          "label": "Java",
          "value": 157618,
          "color": "#4daa4b"
        },
        {
          "label": "PHP",
          "value": 114384,
          "color": "#90c469"
        },
        {
          "label": "Python",
          "value": 95002,
          "color": "#daca61"
        },
        {
          "label": "C+",
          "value": 78327,
          "color": "#e4a14b"
        },
        {
          "label": "C",
          "value": 67706,
          "color": "#e98125"
        },
        {
          "label": "Objective-C",
          "value": 36344,
          "color": "#cb2121"
        },
        {
          "label": "Shell",
          "value": 28561,
          "color": "#830909"
        },
        {
          "label": "Cobol",
          "value": 24131,
          "color": "#923e99"
        },
        {
          "label": "C#",
          "value": 100,
          "color": "#ae83d5"
        },
        {
          "label": "Coldfusion",
          "value": 68,
          "color": "#bf273e"
        },
        {
          "label": "Fortran",
          "value": 218812,
          "color": "#ce2aeb"
        },
        {
          "label": "Coffeescript",
          "value": 157618,
          "color": "#bca44a"
        },
        {
          "label": "Node",
          "value": 114384,
          "color": "#618d1b"
        },
        {
          "label": "Basic",
          "value": 95002,
          "color": "#1ee67b"
        },
        {
          "label": "Cola",
          "value": 36344,
          "color": "#b0ec44"
        },
        {
          "label": "Perl",
          "value": 32170,
          "color": "#a4a0c9"
        },
        {
          "label": "Dart",
          "value": 28561,
          "color": "#322849"
        },
        {
          "label": "Go",
          "value": 264131,
          "color": "#86f71a"
        },
        {
          "label": "Groovy",
          "value": 218812,
          "color": "#d1c87f"
        },
        {
          "label": "Processing",
          "value": 157618,
          "color": "#7d9058"
        },
        {
          "label": "Smalltalk",
          "value": 114384,
          "color": "#44b9b0"
        },
        {
          "label": "Scala",
          "value": 95002,
          "color": "#7c37c0"
        },
        {
          "label": "Visual Basic",
          "value": 78327,
          "color": "#cc9fb1"
        },
        {
          "label": "Scheme",
          "value": 67706,
          "color": "#e65414"
        },
        {
          "label": "Rust",
          "value": 36344,
          "color": "#8b6834"
        },
        {
          "label": "FoxPro",
          "value": 32170,
          "color": "#248838"
        }
      ]
    },
    "labels": {
      "outer": {
        "pieDistance": 32
      },
      "inner": {
        "hideWhenLessThanPercentage": 3
      },
      "mainLabel": {
        "fontSize": 11
      },
      "percentage": {
        "color": "#ffffff",
        "decimalPlaces": 0
      },
      "value": {
        "color": "#adadad",
        "fontSize": 11
      },
      "lines": {
        "enabled": true
      },
      "truncation": {
        "enabled": true
      }
    },
    "effects": {
      "pullOutSegmentOnClick": {
        "effect": "linear",
        "speed": 400,
        "size": 8
      }
    },
    "misc": {
      "gradient": {
        "enabled": true,
        "percentage": 100
      }
    }
  });
</script>


<script>

  //var frequency_list = [{"text":"study","size":40},{"text":"motion","size":15},{"text":"forces","size":10},{"text":"electricity","size":15},{"text":"movement","size":10},{"text":"relation","size":5},{"text":"things","size":10},{"text":"force","size":5},{"text":"ad","size":5},{"text":"energy","size":85},{"text":"living","size":5},{"text":"nonliving","size":5},{"text":"laws","size":15},{"text":"speed","size":45},{"text":"velocity","size":30},{"text":"define","size":5},{"text":"constraints","size":5},{"text":"universe","size":10},{"text":"physics","size":120},{"text":"describing","size":5},{"text":"matter","size":90},{"text":"physics-the","size":5},{"text":"world","size":10},{"text":"works","size":10},{"text":"science","size":70},{"text":"interactions","size":30},{"text":"studies","size":5},{"text":"properties","size":45},{"text":"nature","size":40},{"text":"branch","size":30},{"text":"concerned","size":25},{"text":"source","size":40},{"text":"google","size":10},{"text":"defintions","size":5},{"text":"two","size":15},{"text":"grouped","size":15},{"text":"traditional","size":15},{"text":"fields","size":15},{"text":"acoustics","size":15},{"text":"optics","size":15},{"text":"mechanics","size":20},{"text":"thermodynamics","size":15},{"text":"electromagnetism","size":15},{"text":"modern","size":15},{"text":"extensions","size":15},{"text":"thefreedictionary","size":15},{"text":"interaction","size":15},{"text":"org","size":25},{"text":"answers","size":5},{"text":"natural","size":15},{"text":"objects","size":5},{"text":"treats","size":10},{"text":"acting","size":5},{"text":"department","size":5},{"text":"gravitation","size":5},{"text":"heat","size":10},{"text":"light","size":10},{"text":"magnetism","size":10},{"text":"modify","size":5},{"text":"general","size":10},{"text":"bodies","size":5},{"text":"philosophy","size":5},{"text":"brainyquote","size":5},{"text":"words","size":5},{"text":"ph","size":5},{"text":"html","size":5},{"text":"lrl","size":5},{"text":"zgzmeylfwuy","size":5},{"text":"subject","size":5},{"text":"distinguished","size":5},{"text":"chemistry","size":5},{"text":"biology","size":5},{"text":"includes","size":5},{"text":"radiation","size":5},{"text":"sound","size":5},{"text":"structure","size":5},{"text":"atoms","size":5},{"text":"including","size":10},{"text":"atomic","size":10},{"text":"nuclear","size":10},{"text":"cryogenics","size":10},{"text":"solid-state","size":10},{"text":"particle","size":10},{"text":"plasma","size":10},{"text":"deals","size":5},{"text":"merriam-webster","size":5},{"text":"dictionary","size":10},{"text":"analysis","size":5},{"text":"conducted","size":5},{"text":"order","size":5},{"text":"understand","size":5},{"text":"behaves","size":5},{"text":"en","size":5},{"text":"wikipedia","size":5},{"text":"wiki","size":5},{"text":"physics-","size":5},{"text":"physical","size":5},{"text":"behaviour","size":5},{"text":"collinsdictionary","size":5},{"text":"english","size":5},{"text":"time","size":35},{"text":"distance","size":35},{"text":"wheels","size":5},{"text":"revelations","size":5},{"text":"minute","size":5},{"text":"acceleration","size":20},{"text":"torque","size":5},{"text":"wheel","size":5},{"text":"rotations","size":5},{"text":"resistance","size":5},{"text":"momentum","size":5},{"text":"measure","size":10},{"text":"direction","size":10},{"text":"car","size":5},{"text":"add","size":5},{"text":"traveled","size":5},{"text":"weight","size":5},{"text":"electrical","size":5},{"text":"power","size":5}];
  var frequency_list = <%=@natural_language_json_cloud%>

  console.log(<%=@natural_language_json_cloud%>);

  var color = d3.scale.linear()
      .domain([0,1,2,3,4,5,6,10,15,20,100])
      .range(["#ddd", "#ccc", "#bbb", "#aaa", "#999", "#888", "#777", "#666", "#555", "#444", "#333", "#222"]);

  d3.layout.cloud().size([800, 300])
      .words(frequency_list)
      .rotate(0)
      .fontSize(function(d) { return d.size; })
      .on("end", draw)
      .start();

  function draw(words) {
    // Add the svg tagcloud to body
    d3.select("body").append("svg")
        .attr("width", 850)
        .attr("height", 350)
        .attr("class", "wordcloud")
        .append("g")
        // without the transform, words words would get cutoff to the left and top, they would
        // appear outside of the SVG area
        .attr("transform", "translate(320,200)")
        .selectAll("text")
        .data(words)
        .enter().append("text")
        .style("font-size", function(d) { return d.size + "px"; })
        .style("fill", function(d, i) { return color(i); })
        .attr("transform", function(d) {
          return "translate(" + [d.x, d.y] + ")rotate(" + d.rotate + ")";
        })
        .text(function(d) { return d.text; });
  }
</script>

